<html>
  <body>
    <h1>Gerbis</h1>
  </body>
  <script type="text/javascript" src="gerbis.js"></script>
  <script>
    var assert = function(msg, expected){ if(!expected){ throw new Error(msg) }else{ console.log(".") } ;}
    var g = new Gerbis;
    assert( 'SET: ', g.set('foo', 1) == true );
    assert( 'GET: ', g.get('foo') == 1 );

    g.set('bar', 2);
    g.set('baz', 3);

    assert( 'DEL: ', g.del('foo') == true );
    assert( 'EXISTS: ', g.exists('bar') == true );
    assert( 'EXPIRE: ', g.expire('bar', 3) == true);
    assert( 'EXISTS (after expire): ', g.exists('bar') == true );
    assert( 'TTL: ', g.ttl('bar') > 1 );
    assert( 'TTL (wo expire): ', g.ttl('baz') == -1 );
    setTimeout( function(){
      assert( 'EXPIREd:', g.exists('bar') == false );
    }, 3000)
    assert( 'EXPIREAT: ', g.expireat('baz', new Date().getTime() + 3000) == true );
    setTimeout(function(){
      assert( 'EXPIREdAT: ', g.exists('baz') == false)
    }, 3000);
    g.set('one', 1);
    g.set('two', 2);
    g.set('three', 3);
    assert('KEYS search 1: ', g.keys("t").indexOf("three") >= 0);
    assert('KEYS search 1: ', g.keys("t").indexOf("two") >= 0);
    assert('KEYS search 2: ', g.keys("ee$").indexOf('three') >= 0);

  </script>

</html>
