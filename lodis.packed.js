(function(){var d=Array.prototype.slice,c=Array.prototype.indexOf||function(g){for(var f=0,e=this.length;f<e;f++){if(this[f]===g){return f}}return -1},a=Object.prototype.hasOwnProperty,b=function(h,f){for(var e in f){if(a.call(f,e)){h[e]=f[e]}}function g(){this.constructor=h}g.prototype=f.prototype;h.prototype=new g;h.__super__=f.prototype;return h};this.Node=(function(){e.prototype.next=null;e.prototype.prev=null;function e(f){this.value=f}e.prototype.toString=function(){return this.value};return e})();this.LinkedList=(function(){e.prototype.first=null;e.prototype.length=0;function e(g){var i,h,f;if(g==null){g=false}if(g.length){for(h=0,f=g.length;h<f;h++){i=g[h];this.add(i)}}this}e.prototype.add=function(){var l,i,k,h,j,g,f;h=1<=arguments.length?d.call(arguments,0):[];f=[];for(j=0,g=h.length;j<g;j++){k=h[j];i=new Node(k);if(this.first!=null){l=this.first;while(l.next!=null){l=l.next}l.next=i}else{this.first=i}f.push(this.length++)}return f};e.prototype.remove=function(f){var j,g,h;if((-1<f&&f<this.length)){j=this.first;g=0;if(f===0){this.first=j.next}else{while(g++<f){h=j;j=j.next}h.next=j.next}this.length--;return j.value}};e.prototype.item=function(f){var h,g;if((-1<f&&f<this.length)){h=this.first;g=0;while(g++<f){h=h.next}return h.value}};return e})();this.Lodis=(function(){function e(){this.storage=window.localStorage;this.expiration_set=window.sessionStorage}e.prototype.__get_from_storage=function(f){return this.storage.getItem(f)};e.prototype.__set_in_storage=function(f,g){return this.storage.setItem(f,g)};e.prototype.__exists_in_storage=function(f){return this.__get_from_storage(f)!=null};e.prototype.__alter_integer_value=function(f,h){var g;if(this.exists(f)){g=parseInt(this.get(f));if(typeof g==="number"){g=g+h;this.set(f,g);return g}else{throw new e.prototype.DataType.prototype.InvalidType}}else{return this.set(f,h)}};e.prototype.append=function(h,i){var g,f;f=this.get(h)||new String;g=f+i;this.set(h,g);return g.length};e.prototype.decr=function(f){return this.decrby(f,1)};e.prototype.incr=function(f){return this.incrby(f,1)};e.prototype.decrby=function(f,g){return this.__alter_integer_value(f,-g)};e.prototype.incrby=function(f,g){return this.__alter_integer_value(f,g)};e.prototype.set=function(g,h){var f;f=new e.prototype.DataType.prototype.String;f.set(h);f.pack();this.__set_in_storage(g,f.toString());return true};e.prototype.exists=function(f){return this.__get_from_storage(f)!=null};e.prototype.get=function(f){if(this.exists(f)){return new e.prototype.DataType.prototype.String(this.__get_from_storage(f)).toString()}else{return null}};e.prototype.setbit=function(f,h,g){};e.prototype.getbit=function(f){};e.prototype.getrange=function(h,i,f){var g;if(this.exists(h)){g=this.get(h);if(i<0){i=g.length+i}if(f<0){f=g.length+f}return g.substr(i,f+1)}};e.prototype.getset=function(g,h){var f;if(this.exists(g)){f=this.get(g);this.set(g,h);return f}};e.prototype.mget=function(){var h,i,f,j,g;i=1<=arguments.length?d.call(arguments,0):[];f=[];for(j=0,g=i.length;j<g;j++){h=i[j];f.push(this.get(h))}return f};e.prototype.mset=function(){var h,f,j,g;f=1<=arguments.length?d.call(arguments,0):[];g=[];for(h in f){j=f[h];if(h%2){g.push(this.set(f[h-1],j))}}return g};e.prototype.msetnx=function(){var h,g,f;f=1<=arguments.length?d.call(arguments,0):[];for(h in f){g=f[h];if(!(h%2)&&this.exists(g)){return}}return this.mset.apply(this,f)};e.prototype.setex=function(g,f,h){this.set(g,h);return this.expire(g,f)};e.prototype.setnx=function(f,g){if(!this.exists(f)){return this.set(f,g)}};e.prototype.setrange=function(j,l,k){var h,g,f;g=(function(){if(this.exists(j)){return this.get(j).substr(0,l)}else{f=new String;for(h=0;0<=l?h<l:h>l;0<=l?h++:h--){f+=" "}return f}}).call(this);return this.set(j,""+g+k)};e.prototype.strlen=function(f){if(this.exists(f)){return this.get(f).length}else{return 0}};e.prototype.__get_expiration=function(f){return JSON.parse(this.expiration_set.getItem(f))};e.prototype.__set_expiration=function(f,g){return this.expiration_set.setItem(f,JSON.stringify(g))};e.prototype.__del_expiration=function(f){return this.expiration_set.removeItem(f)};e.prototype.del=function(){var g,h,i,f;h=1<=arguments.length?d.call(arguments,0):[];for(i=0,f=h.length;i<f;i++){g=h[i];this.storage.removeItem(g)}return true};e.prototype.expire=function(g,i){var f,j,h;f=i*1000;j=setTimeout(this._expire_key,f,g);h={id:j,timeout:new Date().getTime()+f};this.__set_expiration(g,h);return true};e.prototype.expireat=function(g,f){var h;if((f<new Date().getTime())||!this.exists(g)){return false}h=(f-new Date().getTime())/1000;this.expire(g,h);return true};e.prototype.ttl=function(f){var g;if(this.exists(f)){if(g=this.__get_expiration(f)){return Math.floor((g.timeout-new Date().getTime())/1000)}else{return -1}}};e.prototype.keys=function(k){var h,g,f,j;h=[];for(g=0,j=this.dbsize();0<=j?g<j:g>j;0<=j?g++:g--){f=this.storage.key(g);if(f.match(k)){h.push(f)}}return h};e.prototype.persist=function(f){var g;if(this.exists(f)){if(g=this.__get_expiration(f)){clearTimeout(g.id);return this.__del_expiration(f)}}};e.prototype.rename=function(f,g){var h;h=this.get(f);this.del(f);return this.set(g,h)};e.prototype.renamenx=function(f,g){if(!this.exists(g)){return this.rename(f,g)}};e.prototype.__get_from_hash=function(h,g){var k,f,j,i;if(g==null){g={with_keys:true,with_values:true,only:[]}}k=this.__get_hash(h);f=[];i=k.values;for(h in i){j=i[h];if(g.with_keys){f.push(h)}if(g.with_values||(g.only&&c.call(g.only,h)>=0)){f.push(j)}}return f};e.prototype.__get_hash=function(f){return new e.prototype.DataType.prototype.Hash(this.__get_from_storage(f)).unpack()};e.prototype.__alter_integer_value_for_hash=function(h,g,j){var f,i;if(this.hexists(h,g)){i=parseInt(this.hget(h,g));if(typeof i==="number"){f=i+j;this.hset(h,g,f);return f}else{throw new e.prototype.DataType.prototype.InvalidType}}else{this.hset(h,g,j);return j}};e.prototype.hexists=function(g,f){var h;if(this.__exists_in_storage(g)){h=this.__get_hash(g);return h.get(f)!=null}};e.prototype.hset=function(g,f,h){var i;i=this.__exists_in_storage(g)?this.__get_hash(g):new e.prototype.DataType.prototype.Hash;i.add(f,h);i.pack();h=i.toString();this.__set_in_storage(g,h);return true};e.prototype.hget=function(g,f){var h;if(this.__exists_in_storage(g)){h=this.__get_hash(g);return h.get(f)}};e.prototype.hdel=function(g,f){var i,h;if(this.hexists(g,f)){i=this.__get_hash(g);i.remove(f);i.pack();h=i.toString();this.__set_in_storage(g,h);return true}else{return false}};e.prototype.hgetall=function(f){if(this.__exists_in_storage(f)){return this.__get_from_hash(f)}};e.prototype.hincrby=function(g,f,h){return this.__alter_integer_value_for_hash(g,f,h)};e.prototype.hkeys=function(f){if(this.exists(f)){return this.__get_from_hash(f,{with_keys:true,with_values:false})}};e.prototype.hlen=function(f){if(this.exists(f)){return this.hkeys(f).length}};e.prototype.hmget=function(){var f,g;f=arguments[0],g=2<=arguments.length?d.call(arguments,1):[];if(this.exists(f)){return this.__get_from_hash(f,{with_values:true,with_keys:false,only:g})}};e.prototype.hmset=function(){var j,h,g,f,k;j=arguments[0],g=2<=arguments.length?d.call(arguments,1):[];f=new e.prototype.DataType.prototype.Hash;for(h in g){k=g[h];if(h%2){f.add(g[h-1],k)}}f.pack();k=f.toString();return this.__set_in_storage(j,k)};e.prototype.hsetnx=function(g,f,h){if(!this.hexists(g,f)){this.hset(g,f,h);return true}else{return false}};e.prototype.hvals=function(f){if(this.exists(f)){return this.__get_from_hash(f,{with_keys:false,with_values:true})}};e.prototype.flushall=function(){this.storage.clear();return this.expiration_set.clear()};e.prototype.dbsize=function(){return this.storage.length};return e})();Lodis.prototype.DataType=(function(){function e(){}e.prototype.find=function(g){var f,h;h=g[0],f=2<=g.length?d.call(g,1):[];return{0:Lodis.prototype.DataType.prototype.String,1:Lodis.prototype.DataType.prototype.Hash,2:Lodis.prototype.DataType.prototype.List}[h]};return e})();(Lodis.prototype.DataType.prototype.InvalidType=(function(){function e(){}return e})())<Error;Lodis.prototype.DataType.prototype.Base=(function(){function e(f){this.values=f;this.unpack()}e.prototype.toJSON=function(f){return JSON.stringify(f)};e.prototype.fromJSON=function(f){return JSON.parse(f)};e.prototype.toString=function(){return this.values};e.prototype.parse=function(f){return f};e.prototype.pack=function(){return this.values=""+(this.type.toString())+(this.packer(this.values))};e.prototype.packer=function(f){return f};e.prototype.check_valid_type=function(f){if(parseInt(f!==this.type)){throw new Lodis.prototype.DataType.prototype.InvalidType}};e.prototype.unpack=function(){var g,f,h,i;if((h=this.values)!=null?h.length:void 0){i=this.values,g=i[0],f=2<=i.length?d.call(i,1):[];this.check_valid_type(g);this.values=f.join("");return this}};return e})();Lodis.prototype.DataType.prototype.Hash=(function(){b(e,Lodis.prototype.DataType.prototype.Base);e.prototype.type=1;function e(f){this.values=f!=null?f:{}}e.prototype.packer=function(f){return this.toJSON(f)};e.prototype.unpack=function(){e.__super__.unpack.apply(this,arguments);this.set(this.fromJSON(this.values));return this};e.prototype.set=function(f){return this.values=f};e.prototype.add=function(f,g){return this.values[f]=g};e.prototype.remove=function(f){return delete this.values[f]};e.prototype.get=function(f){return this.values[f]};return e})();Lodis.prototype.DataType.prototype.List=(function(){b(e,Lodis.prototype.DataType.prototype.Base);function e(){e.__super__.constructor.apply(this,arguments)}e.prototype.type=2;e.prototype.parse=function(){return new LinkedList(this.values)};return e})();Lodis.prototype.DataType.prototype.String=(function(){b(e,Lodis.prototype.DataType.prototype.Base);function e(){e.__super__.constructor.apply(this,arguments)}e.prototype.type=0;e.prototype.set=function(f){return this.values=f};e.prototype.parse=function(){return this.toJSON(this.values)};return e})()}).call(this);